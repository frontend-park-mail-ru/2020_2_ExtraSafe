<fest:template xmlns:fest="http://fest.mail.ru" context_name="json">
    <div class="edit-task-content">

        <div class="edit-task-content-name">
            <div class="edit-task-content-name__text" id="taskName" contenteditable="true">
                <fest:value>json.taskName</fest:value>
            </div>
            <img class="edit-task-close" src="../../img/icons/close.svg" id="closeTask" alt="close"/>
        </div>

        <div class="edit-task-content-info-container">

            <img class="edit-task-content-delete-icon" src="../../img/icons/bin.svg" id="deleteTask" title="Удалить задачу" alt="delete task"/>

            <div class="edit-task-content-info">
                <div class="edit-task-content-info-collaborator-container ">
                    <div class="edit-task-content-info-title">
                        Участники
                    </div>

                    <div class="edit-task-content-info-elements" id="taskAssignersDiv">
                        <fest:for iterate="json.taskAssigners" index="i" value="v">
                            <fest:include context="v" src="./TaskAssigner.tmpl.xml"/>
                        </fest:for>
                        <img src="../../img/icons/add_collaborator.svg" class="edit-task-content-info-elements__add-new-icon"
                             id="taskAssignersAdd" title="Добавить участника" alt="add new collaborator"/>
                    </div>

                    <div class="edit-add-collaborator" id="taskAssignersPopup"/>
                </div>

                <div class="edit-task-content-info-tag-container">
                    <div class="edit-tags" id="tagPopup"/>

                    <div class="edit-task-content-info-title">
                        Метки
                    </div>

                    <div class="edit-task-content-info-elements">
                        <div class="edit-task-content-info-elements-tags-div" id="tagsDetailedDiv">
                            <fest:for iterate="json.tags" index="i" value="v">
                                <fest:include context="v" src="./TagDetailed.tmpl.xml"/>
                            </fest:for>
                        </div>

                        <img src="../../img/icons/add_tag.svg" class="edit-task-content-info-elements__add-new-icon"
                             id="addTag" title="Добавить метку" alt="add new tag"/>
                    </div>
                </div>
            </div>

            <div class="edit-task-content-description">
                <div class="edit-task-content-description__title">
                    Описание
                </div>

                <div class="edit-task-content-description-body">
                    <div class="edit-task-content-description-body__text" data-placeholder="Напишите описание..." id="taskDescription" contenteditable="true">
                        <fest:value>json.taskDescription</fest:value>
                    </div>
                </div>
                <button class="edit-task-content-description-body-footer-save-button" id="saveTaskDescription">
                    Сохранить
                </button>
            </div>

            <div class="edit-task-content-attachments">
                <div class="edit-task-content-attachments__title">
                    Вложения
                </div>

                <div class="edit-task-content-attachments-body" id="attachmentsDiv">
                    <fest:for iterate="json.attachments" index="i" value="v">
                        <fest:include context="v" src="./Attachment.tmpl.xml"/>
                    </fest:for>

                    <label for="fileInput" class="edit-task-content-attachments-add-new" id="uploadFile">
                        <img class="edit-task-content-attachments-add-new__icon" src="../../img/icons/add.svg" alt="add"/>

                        <div class="edit-task-content-attachments-add-new__text">
                            Загрузить новый файл
                        </div>
                    </label>
                    <input id="fileInput" style="display: none" type="file"/>
                </div>
            </div>

            <div class="edit-task-content-check-lists">

                <div class="edit-task-content-check-lists-title">
                    Чек-листы
                </div>

                <div class="edit-task-content-check-lists-body" id="checkListsDiv">
                    <div class="edit-check-lists" id="checkListPopup"/>

                    <fest:for iterate="json.checkLists" index="i" value="v">
                        <fest:include context="v" src="./CheckList.tmpl.xml"/>
                    </fest:for>

                    <div class="edit-task-content-check-lists-add-new" id="checkListCreate">
                        <img class="edit-task-content-check-lists-add-new__icon" src="../../img/icons/add.svg" alt="add"/>

                        <div class="edit-task-content-check-lists-add-new__text">
                            Создать чек-лист
                        </div>
                    </div>

                </div>
            </div>

            <div class="edit-task-content-comments">
                <div class="edit-task-content-comments__title">
                    Комментарии
                </div>

                <div class="edit-task-content-comments-add">
                    <img class="edit-task-content-comments-add__collaborator" src="{json.commentAvatar}" alt="author"/>

                    <div class="edit-task-content-comments-add-comment">

                            <div class="edit-task-content-comments-add-comment__text" contenteditable="true"
                                 id="commentInputID" data-placeholder="Напишите комментарий..."/>

                        <button class="edit-task-content-comments-add-comment__button" id="commentSaveID"> Сохранить </button>
                    </div>
                </div>

                <div class="edit-task-content-comments-body" id="commentsDiv">
                    <fest:for iterate="json.comments" index="i" value="v">
                        <fest:include context="v" src="./Comment.tmpl.xml"/>
                    </fest:for>
                </div>
            </div>
        </div>
    </div>
</fest:template>
